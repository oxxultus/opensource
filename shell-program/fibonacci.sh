#!/bin/bash
# fibonacci.sh
# let 명령어를 사용하여 피보나치 수열을 출력하는 스크립트

# ----------------------------------------------------
# 1. 입력 인자 유효성 검사 및 변수 설정
# ----------------------------------------------------

TARGET_COUNT=$1 # 출력할 항의 개수

# 인자가 제공되었고 양의 정수인지 확인
# 0으로 시작하지 않는 1 이상의 정수(양의 정수)를 처리합니다.
# 
if ! [[ "$TARGET_COUNT" =~ ^[1-9][0-9]*$ ]]; then
    echo "오류: 피보나치 수열의 항 개수(1 이상의 정수)를 인자로 입력해 주세요."
    echo "사용법: $0 [개수]"
    exit 1
fi

# ----------------------------------------------------
# 2. 피보나치 수열 로직
# ----------------------------------------------------

# 피보나치 초기값 설정
A=0  # 첫 번째 항
B=1  # 두 번째 항
COUNT=1 # 현재까지 출력한 항의 개수

echo "--- 피보나치 수열 (총 ${TARGET_COUNT} 항) ---"

# 첫 번째 항 (0) 출력
echo "#1: $A"

# TARGET_COUNT가 1보다 클 때만 루프 시작
# 여기서 사용되는 let 명령어는 산술 연산을 수행하는 데 사용됩니다.
# let의 뒤로 연산식을 작성하면 $없이 변수의 값을 사용하여 연산이 가능합니다.
if [ $TARGET_COUNT -ge 2 ]; then
    
    # 두 번째 항 (1) 출력
    echo "#2: $B"
    let COUNT=2
    
    # 세 번째 항부터 목표 개수까지 반복
    while [ $COUNT -lt $TARGET_COUNT ]; do
        
        # 1. 다음 항 계산 (let 명령 사용)
        # C = A + B 와 동일
        let C=A+B
        
        # 2. 다음 항 출력 및 카운트 증가
        let COUNT=COUNT+1
        echo "#${COUNT}: $C"
        
        # 3. 항 업데이트 (다음 계산을 위해 A와 B 값을 갱신)
        # A는 이전 B 값, B는 이전 C 값(새로운 항)이 됨
        A=$B
        B=$C
        
    done
fi

echo "------------------------------------------------"